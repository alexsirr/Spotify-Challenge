<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title></title>

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>     
        <link href="css/main.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="js/main.js"></script>
    </head>
    <body ng-app="myApp" ng-controller="myCtrl" novalidate>
    	<div class="container">
    		<h1>RANDOMIZE POPULAR PLAYLIST THINGY</h1>
    	</div>
        <form name="myForm" class="container">
            <div class="form-group" ng-class="{'has-error' : myForm.search.$touched && myForm.search.$invalid}">
            	<label for="search">Artist:</label>
                <input class="form-control" ng-required="true" ng-model="artist" required name="search" ng-minlength="1" placeholder="Enter an artist">
				<p ng-show="myForm.search.$touched && !myForm.search.$valid" class="help-block">Must enter an artist to search</p>
            </div>
            <div class="form-group" ng-class="{'has-error' : myForm.playlistSize.$touched && myForm.playlistSize.$invalid}">
            	<label for="playlistSize">Max Playlist Size:</label>
                <input class="form-control" name="playlistSize" ng-model="maxSize" ng-required="true" type="number" min="1" required>
				<p ng-show="!myForm.playlistSize.$valid" class="help-block">Must enter a valid number!</p>
            </div>
            <div class="form-group">
                <button  name="submitBtn" class="btn btn-primary" ng-disabled="myForm.$invalid" ng-click="execute()" type="submit">Make Playlist!</button>
            </div>
        </form>
        <div class="container" ng-show="myArtists.length == 0">
        	<h2>No artists found by that name...</h2>
        </div>
        
        <div class="container" ng-show="myArtists != null && randomizePlaylist.length != 0">
        	<h2>Randomized playlist for <b>{{myArtists[0].name}}</b></h2>
        	<table class="table table-striped table-hover">
        		<thead>
        			<tr>
        				<td></td>
        				<td> <a ng-click="sortType = 'artists[0].name'; reverseSort = !reverseSort" href="#">Artist Name</a></td>
        				<td> <a ng-click="sortType = 'name'; reverseSort = !reverseSort" href="#">Track Name</a></td>
        				<td> <a ng-click="sortType = 'album.name'; reverseSort = !reverseSort" href="#">Album Name</a></td>
        			</tr>
        		</thead>
        		<tr ng-repeat="track in randomizePlaylist | orderBy:sortType:reverseSort" ng-click="play(track)">
        			<td>{{$index + 1}}</td>
                	<td>{{track.artists[0].name}}</td>
                	<td>{{track.name}}</td>
                	<td>{{track.album.name}}</td>
            	</tr>
        	</table> 
        	<button  name="shuffle" class="btn btn-primary" ng-disabled="myForm.$invalid" ng-click="randomize()">Get a New Playlist!</button>
        	<p ng-show="currentlyPlaying != null">Currently playing {{currentlyPlaying}}</p>
        </div>
        <div class="container">
        	<h2 ng-show="randomizePlaylist.length == 0">Sorry, it appears that <b>{{myArtists[0].name}}</b> does not have any related artists...</h2>
        </div>
        <div class="container" ng-show="myArtists.length > 1">
        	<h2>Also Found...</h2>
            <ul>
                <li ng-repeat="item in myArtists" ng-hide="$first"> <a ng-click="changeInput(item.name); execute()" href="#">{{item.name}}</a> </li>
            </ul>
        </div>
    </body>
</html>